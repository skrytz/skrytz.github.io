<!DOCTYPE html>
<html>
<head>
    <title>Intraday Golden Gate Analysis - SPX 10-Minute Data</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #2c3e50;
            line-height: 1.7;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 60px;
            padding: 50px 40px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-left: 6px solid #3498db;
            position: relative;
        }

        .nav-links {
            position: absolute;
            top: 20px;
            right: 30px;
            display: flex;
            gap: 15px;
        }

        .nav-link {
            background: #3498db;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .nav-link:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        
        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 20px;
            font-family: 'Georgia', serif;
        }
        
        .header .subtitle {
            font-size: 1.3rem;
            color: #7f8c8d;
            margin-bottom: 12px;
            font-style: italic;
        }
        
        .header .period {
            font-size: 1rem;
            color: #95a5a6;
            font-weight: 500;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card.gap-open {
            border-left: 6px solid #e74c3c;
        }

        .stat-card.intraday {
            border-left: 6px solid #3498db;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .gap-open .stat-number {
            color: #e74c3c;
        }

        .intraday .stat-number {
            color: #3498db;
        }

        .stat-label {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .stat-description {
            font-size: 0.9rem;
            color: #95a5a6;
            line-height: 1.5;
        }

        .analysis-section {
            background: white;
            border-radius: 20px;
            padding: 50px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 30px;
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 40px;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .chart-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .insight-card {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .insight-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .insight-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .insight-text {
            font-size: 0.9rem;
            opacity: 0.9;
            line-height: 1.6;
        }

        .methodology {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 40px;
            margin-top: 40px;
        }

        .methodology h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .methodology ul {
            list-style: none;
            padding: 0;
        }

        .methodology li {
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
            position: relative;
            padding-left: 30px;
        }

        .methodology li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
        }

        .toggle-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .toggle-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: #3498db;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .toggle-btn.active {
            background: #2d3748;
            box-shadow: 0 4px 15px rgba(45, 55, 72, 0.3);
        }

        @media (max-width: 768px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-links {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="data.html" class="nav-link">
                    <i class="fas fa-database"></i> Data
                </a>
            </div>
            <h1><i class="fas fa-clock"></i> Intraday Golden Gate Analysis</h1>
            <div class="subtitle">SPX 10-Minute Data Analysis with 30-Minute Time Buckets</div>
            <div class="period">Gap-Open vs Intraday Trigger Scenarios | 2004-2025</div>
        </div>

        <div class="summary-stats">
            <div class="stat-card gap-open">
                <div class="stat-number">2,162</div>
                <div class="stat-label">Gap-Open Events</div>
                <div class="stat-description">SPX opened beyond ±38.2% ATR levels at market open (9:30 AM)</div>
            </div>
            <div class="stat-card intraday">
                <div class="stat-number">38,393</div>
                <div class="stat-label">Intraday Triggers</div>
                <div class="stat-description">Intraday touches of ±38.2% ATR levels during trading sessions</div>
            </div>
            <div class="stat-card gap-open">
                <div class="stat-number">21</div>
                <div class="stat-label">Years Analyzed</div>
                <div class="stat-description">Comprehensive analysis from 2004 to 2025 using 10-minute SPX data</div>
            </div>
            <div class="stat-card intraday">
                <div class="stat-number">210K+</div>
                <div class="stat-label">Data Points</div>
                <div class="stat-description">Over 210,000 10-minute bars processed with Pine Script ATR methodology</div>
            </div>
        </div>

        <div class="analysis-section">
            <h2 class="section-title"><i class="fas fa-chart-line"></i> Gap-Open Scenario Analysis</h2>
            <p style="margin-bottom: 30px; font-size: 1.1rem; color: #7f8c8d;">
                Analysis of scenarios where SPX opens beyond ±38.2% ATR levels at 9:30 AM, tracking hourly completion probability for reaching ±61.8% ATR targets.
            </p>
            
            <div class="toggle-buttons">
                <button class="toggle-btn active" onclick="showGapOpenChart('positive')">Positive Gap-Opens</button>
                <button class="toggle-btn" onclick="showGapOpenChart('negative')">Negative Gap-Opens</button>
                <button class="toggle-btn" onclick="showGapOpenChart('combined')">Combined View</button>
            </div>

            <div class="chart-container">
                <canvas id="gapOpenChart"></canvas>
            </div>

        </div>

        <div class="analysis-section">
            <h2 class="section-title"><i class="fas fa-chart-area"></i> Intraday Trigger Analysis</h2>
            <p style="margin-bottom: 30px; font-size: 1.1rem; color: #7f8c8d;">
                Analysis of intraday triggers when SPX touches ±38.2% ATR levels during trading sessions, tracking time-to-completion for ±61.8% targets.
            </p>

            <div class="toggle-buttons">
                <button class="toggle-btn active" onclick="showIntradayChart('positive')">Positive Triggers</button>
                <button class="toggle-btn" onclick="showIntradayChart('negative')">Negative Triggers</button>
                <button class="toggle-btn" onclick="showIntradayChart('remaining')">Remaining Time Analysis</button>
            </div>

            <div class="chart-container">
                <canvas id="intradayChart"></canvas>
            </div>


        </div>


        <div class="analysis-section">
            <h2 class="section-title"><i class="fas fa-exclamation-triangle"></i> Critical Trading Insights</h2>
            
            <div class="insights-grid">
                <div class="insight-card" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">
                    <div class="insight-icon"><i class="fas fa-clock"></i></div>
                    <div class="insight-title">The "2 PM Rule"</div>
                    <div class="insight-text">If your Golden Gate trade hasn't reached target by 2:00 PM EST, don't be hopeful - there's minimal additional upside.</div>
                </div>
                <div class="insight-card" style="background: linear-gradient(135deg, #27ae60 0%, #229954 100%);">
                    <div class="insight-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="insight-title">Gap-Open Priority</div>
                    <div class="insight-text">Gap-opens have 90%+ success rates vs 60% for intraday triggers. Always prioritize gap-open setups.</div>
                </div>
                <div class="insight-card" style="background: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%);">
                    <div class="insight-icon"><i class="fas fa-arrow-down"></i></div>
                    <div class="insight-title">Negative Bias</div>
                    <div class="insight-text">Negative scenarios slightly outperform positive scenarios in both gap-opens and intraday triggers.</div>
                </div>
                <div class="insight-card" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
                    <div class="insight-icon"><i class="fas fa-hourglass-half"></i></div>
                    <div class="insight-title">Time Decay Effect</div>
                    <div class="insight-text">Most of the move happens early. The longer you wait, the less likely completion becomes.</div>
                </div>
            </div>

            <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 12px; padding: 30px; margin-top: 40px;">
                <h3 style="color: #856404; margin-bottom: 20px;"><i class="fas fa-lightbulb"></i> Key Performance Metrics</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                    <div>
                        <h4 style="color: #e74c3c; margin-bottom: 15px;">Gap-Open Performance</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 8px 0; border-bottom: 1px solid #f1c40f;"><strong>Positive Gap-Opens:</strong> 92.0% success (1,196 events)</li>
                            <li style="padding: 8px 0; border-bottom: 1px solid #f1c40f;"><strong>Negative Gap-Opens:</strong> 94.8% success (966 events)</li>
                            <li style="padding: 8px 0;"><strong>2 PM Improvement:</strong> Only +0.4% to +1.3%</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #3498db; margin-bottom: 15px;">Intraday Trigger Performance</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 8px 0; border-bottom: 1px solid #f1c40f;"><strong>Positive Triggers:</strong> 58.9% success (20,762 events)</li>
                            <li style="padding: 8px 0; border-bottom: 1px solid #f1c40f;"><strong>Negative Triggers:</strong> 63.6% success (17,631 events)</li>
                            <li style="padding: 8px 0;"><strong>Overall:</strong> Moderate probability trades</li>
                        </ul>
                    </div>
                </div>

                <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; padding: 20px;">
                    <h4 style="color: #721c24; margin-bottom: 15px;"><i class="fas fa-exclamation-circle"></i> Critical "Stop Hoping" Time Analysis</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <strong>Positive Gap-Opens (1,196 events):</strong><br>
                            • 3:00 PM: 92.0% (Last significant jump)<br>
                            • 3:30 PM: 92.0% (No improvement)<br>
                            • 4:00 PM: 92.0% (Final)<br>
                            • <span style="color: #dc3545;">Stop hoping after 3:00 PM - zero improvement!</span>
                        </div>
                        <div>
                            <strong>Negative Gap-Opens (966 events):</strong><br>
                            • 3:00 PM: 94.8% (Last improvement)<br>
                            • 3:30 PM: 94.8% (No change)<br>
                            • 4:00 PM: 94.8% (Final)<br>
                            • <span style="color: #dc3545;">Stop hoping after 3:00 PM - zero improvement!</span>
                        </div>
                    </div>

                    <div style="background: #721c24; color: white; padding: 15px; border-radius: 6px; text-align: center;">
                        <strong>🚨 CRITICAL INSIGHT: If your Golden Gate trade hasn't completed by 3:00 PM EST, it's over - ZERO additional probability!</strong>
                    </div>

                    <div style="margin-top: 15px; font-size: 0.9rem; color: #856404;">
                        <strong>Detailed Time Analysis:</strong><br>
                        • <strong>Positive:</strong> 2:00 PM (90.7%) → 3:00 PM (92.0%) = +1.3% | 3:00 PM → 4:00 PM = 0%<br>
                        • <strong>Negative:</strong> 2:00 PM (94.4%) → 3:00 PM (94.8%) = +0.4% | 3:00 PM → 4:00 PM = 0%
                    </div>

                    <!-- "Stop Hoping" Visualization -->
                    <div style="background: white; border-radius: 12px; padding: 25px; margin-top: 25px; border: 2px solid #dc3545;">
                        <h4 style="color: #721c24; margin-bottom: 20px; text-align: center;">
                            <i class="fas fa-chart-line"></i> The "Stop Hoping" Moment - Visual Proof
                        </h4>
                        <div class="chart-container" style="height: 300px; margin-bottom: 20px;">
                            <canvas id="stopHopingChart"></canvas>
                        </div>
                        <div style="background: #f8d7da; padding: 15px; border-radius: 8px; text-align: center;">
                            <strong style="color: #721c24;">
                                📉 After 3:00 PM: The probability flatlines completely - there's literally no point in hoping!
                            </strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-section">
            <div class="methodology">
                <h3><i class="fas fa-cogs"></i> Technical Methodology</h3>
                <ul>
                    <li><strong>Data Source:</strong> SPX 10-minute bars from 2004-2025 (210,000+ records)</li>
                    <li><strong>ATR Calculation:</strong> Pine Script-compatible 14-day ATR using RMA methodology</li>
                    <li><strong>Trigger Levels:</strong> ±38.2% ATR from previous day's close</li>
                    <li><strong>Target Levels:</strong> ±61.8% ATR from previous day's close</li>
                    <li><strong>Time Buckets:</strong> 30-minute intervals for precise completion tracking</li>
                    <li><strong>Gap-Open Definition:</strong> Market open beyond trigger levels at 9:30 AM</li>
                    <li><strong>Intraday Triggers:</strong> Touch of trigger levels during trading session (excluding gap-opens)</li>
                    <li><strong>Success Criteria:</strong> Reaching target levels within same trading day</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Consistent Color Scheme for All Charts
        const CHART_COLORS = {
            positive: {
                primary: '#27ae60',      // Green for positive scenarios
                background: 'rgba(39, 174, 96, 0.1)',
                darker: '#229954'
            },
            negative: {
                primary: '#e74c3c',      // Red for negative scenarios
                background: 'rgba(231, 76, 60, 0.1)',
                darker: '#c0392b'
            },
            neutral: {
                primary: '#3498db',      // Blue for neutral/general data
                background: 'rgba(52, 152, 219, 0.1)',
                darker: '#2980b9'
            },
            accent: {
                primary: '#f39c12',      // Orange for highlights
                background: 'rgba(243, 156, 18, 0.1)',
                darker: '#e67e22'
            }
        };

        // Sample data for demonstration
        const gapOpenData = {
            positive: {
                labels: ['9:30', '10:00', '10:30', '11:00', '11:30', '12:00', '12:30', '13:00', '13:30', '14:00', '14:30', '15:00', '15:30', '16:00'],
                data: [75.8, 81.4, 83.9, 86.0, 87.2, 88.1, 88.6, 89.5, 90.2, 90.7, 91.2, 92.0, 92.0, 92.0]
            },
            negative: {
                labels: ['9:30', '10:00', '10:30', '11:00', '11:30', '12:00', '12:30', '13:00', '13:30', '14:00', '14:30', '15:00', '15:30', '16:00'],
                data: [83.3, 88.6, 90.9, 92.3, 92.4, 92.8, 92.9, 93.6, 94.0, 94.4, 94.7, 94.8, 94.8, 94.8]
            }
        };

        const intradayData = {
            positive: {
                labels: ['0.5h', '1.0h', '1.5h', '2.0h', '2.5h', '3.0h', '3.5h', '4.0h', '4.5h', '5.0h', '5.5h', '6.0h'],
                data: [35, 42, 47, 51, 54, 56, 58, 59, 60, 61, 62, 63]
            },
            negative: {
                labels: ['0.5h', '1.0h', '1.5h', '2.0h', '2.5h', '3.0h', '3.5h', '4.0h', '4.5h', '5.0h', '5.5h', '6.0h'],
                data: [38, 44, 49, 53, 55, 57, 58, 59, 60, 61, 62, 63]
            }
        };

        let gapOpenChart, intradayChart, triggerTimeChart, successRateChart, comparisonChart;

        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
        });

        function initializeCharts() {
            // Gap-Open Chart
            const gapCtx = document.getElementById('gapOpenChart').getContext('2d');
            gapOpenChart = new Chart(gapCtx, {
                type: 'line',
                data: {
                    labels: gapOpenData.positive.labels,
                    datasets: [{
                        label: 'Positive Gap-Opens (%)',
                        data: gapOpenData.positive.data,
                        borderColor: CHART_COLORS.positive.primary,
                        backgroundColor: CHART_COLORS.positive.background,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: false, min: 70, max: 100, title: { display: true, text: 'Completion Rate (%)' } },
                        x: { title: { display: true, text: 'Time of Day' } }
                    },
                    plugins: {
                        title: { display: true, text: 'Gap-Open Completion Rates by Time', font: { size: 16, weight: 'bold' } },
                        legend: { display: true, position: 'top' }
                    }
                }
            });

            // Intraday Chart
            const intradayCtx = document.getElementById('intradayChart').getContext('2d');
            intradayChart = new Chart(intradayCtx, {
                type: 'line',
                data: {
                    labels: intradayData.positive.labels,
                    datasets: [{
                        label: 'Positive Triggers (%)',
                        data: intradayData.positive.data,
                        borderColor: CHART_COLORS.positive.primary,
                        backgroundColor: CHART_COLORS.positive.background,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: false, min: 30, max: 70, title: { display: true, text: 'Completion Rate (%)' } },
                        x: { title: { display: true, text: 'Remaining Time to Close' } }
                    },
                    plugins: {
                        title: { display: true, text: 'Intraday Trigger Completion Rates', font: { size: 16, weight: 'bold' } }
                    }
                }
            });

            // "Stop Hoping" Chart - Shows the dramatic flatline after 3:00 PM
            const stopHopingCtx = document.getElementById('stopHopingChart').getContext('2d');
            const stopHopingChart = new Chart(stopHopingCtx, {
                type: 'line',
                data: {
                    labels: ['9:30', '10:00', '10:30', '11:00', '11:30', '12:00', '12:30', '13:00', '13:30', '14:00', '14:30', '15:00', '15:30', '16:00'],
                    datasets: [
                        {
                            label: 'Positive Gap-Opens (%)',
                            data: [75.8, 81.4, 83.9, 86.0, 87.2, 88.1, 88.6, 89.5, 90.2, 90.7, 91.2, 92.0, 92.0, 92.0],
                            borderColor: CHART_COLORS.positive.primary,
                            backgroundColor: CHART_COLORS.positive.background,
                            borderWidth: 4,
                            fill: true,
                            tension: 0.1,
                            pointBackgroundColor: function(context) {
                                return context.dataIndex >= 11 ? '#dc3545' : CHART_COLORS.positive.primary;
                            },
                            pointBorderColor: function(context) {
                                return context.dataIndex >= 11 ? '#dc3545' : CHART_COLORS.positive.primary;
                            },
                            pointRadius: function(context) {
                                return context.dataIndex >= 11 ? 8 : 4;
                            }
                        },
                        {
                            label: 'Negative Gap-Opens (%)',
                            data: [83.3, 88.6, 90.9, 92.3, 92.4, 92.8, 92.9, 93.6, 94.0, 94.4, 94.7, 94.8, 94.8, 94.8],
                            borderColor: CHART_COLORS.negative.primary,
                            backgroundColor: CHART_COLORS.negative.background,
                            borderWidth: 4,
                            fill: true,
                            tension: 0.1,
                            pointBackgroundColor: function(context) {
                                return context.dataIndex >= 11 ? '#dc3545' : CHART_COLORS.negative.primary;
                            },
                            pointBorderColor: function(context) {
                                return context.dataIndex >= 11 ? '#dc3545' : CHART_COLORS.negative.primary;
                            },
                            pointRadius: function(context) {
                                return context.dataIndex >= 11 ? 8 : 4;
                            }
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 70,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Completion Rate (%)',
                                font: { size: 14, weight: 'bold' }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time of Day (EST)',
                                font: { size: 14, weight: 'bold' }
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'The "Stop Hoping" Moment: Zero Improvement After 3:00 PM',
                            font: { size: 16, weight: 'bold' },
                            color: '#721c24'
                        },
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                font: { size: 12, weight: 'bold' }
                            }
                        }
                    }
                }
            });

            console.log('Charts initialized successfully with consistent colors');
        }

        function showGapOpenChart(type) {
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            let datasets = [];
            if (type === 'positive') {
                datasets = [{
                    label: 'Positive Gap-Opens (%)',
                    data: gapOpenData.positive.data,
                    borderColor: CHART_COLORS.positive.primary,
                    backgroundColor: CHART_COLORS.positive.background,
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }];
            } else if (type === 'negative') {
                datasets = [{
                    label: 'Negative Gap-Opens (%)',
                    data: gapOpenData.negative.data,
                    borderColor: CHART_COLORS.negative.primary,
                    backgroundColor: CHART_COLORS.negative.background,
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }];
            } else {
                datasets = [
                    {
                        label: 'Positive Gap-Opens (%)',
                        data: gapOpenData.positive.data,
                        borderColor: CHART_COLORS.positive.primary,
                        backgroundColor: CHART_COLORS.positive.background,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Negative Gap-Opens (%)',
                        data: gapOpenData.negative.data,
                        borderColor: CHART_COLORS.negative.primary,
                        backgroundColor: CHART_COLORS.negative.background,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }
                ];
            }
            gapOpenChart.data.datasets = datasets;
            gapOpenChart.update();
        }

        function showIntradayChart(type) {
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            let datasets = [];
            if (type === 'positive') {
                datasets = [{
                    label: 'Positive Triggers (%)',
                    data: intradayData.positive.data,
                    borderColor: CHART_COLORS.positive.primary,
                    backgroundColor: CHART_COLORS.positive.background,
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }];
            } else if (type === 'negative') {
                datasets = [{
                    label: 'Negative Triggers (%)',
                    data: intradayData.negative.data,
                    borderColor: CHART_COLORS.negative.primary,
                    backgroundColor: CHART_COLORS.negative.background,
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }];
            } else {
                // Remaining time analysis
                datasets = [
                    {
                        label: 'Positive Triggers',
                        data: intradayData.positive.data,
                        borderColor: CHART_COLORS.positive.primary,
                        backgroundColor: CHART_COLORS.positive.background,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Negative Triggers',
                        data: intradayData.negative.data,
                        borderColor: CHART_COLORS.negative.primary,
                        backgroundColor: CHART_COLORS.negative.background,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }
                ];
            }
            intradayChart.data.datasets = datasets;
            intradayChart.update();
        }
    </script>
</body>
</html>
